<div id="Laps" class="row my-2" style="display: none;">
    <div class="col-md-12">
        <div class="row my-2">
            <h3
                data-en="{{ yaml_info['General']['Table']['LapTimes']['Label']['en'] }}"
                data-jp="{{ yaml_info['General']['Table']['LapTimes']['Label']['jp'] }}"
            >
                {{ yaml_info['General']['Table']['LapTimes']['Label']['en'] }}
            </h3>
            <div class="col-md-12">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['LapNum']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['LapNum']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['LapNum']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['LapTime']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['LapTime']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['LapTime']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['DeltaSecs']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['DeltaSecs']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['DeltaSecs']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['DeltaPct']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['DeltaPct']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['DeltaPct']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['LapDistanceKm']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['LapDistanceKm']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['LapDistanceKm']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['SpeedKphMax']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['SpeedKphMax']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['SpeedKphMax']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['SpeedKphAvg']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['SpeedKphAvg']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['SpeedKphAvg']['Label']['en'] }}
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for idx in laps_info %}
                            <tr>
                                <th scope="row">{{ idx.LapNum }}</th>
                                <td
                                    {% if idx.LapNum == laps_report_info['TopLaps'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.LapNum == laps_report_info['TopLaps'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.LapTime | laptimeformat }}
                                </td>
                                <td>{{ idx.DeltaToBestLap | round(3) }}</td>
                                <td>{{ idx.DeltaToBestLapPercent | round(2) }}</td>
                                <td
                                    {% if idx.LapDistance == laps_report_info['TopLapDistances'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.LapDistance == laps_report_info['TopLapDistances'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.LapDistance | to_km }}
                                </td>
                                <td
                                    {% if idx.SpeedMax == laps_report_info['TopMaxSpeeds'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.SpeedMax == laps_report_info['TopMaxSpeeds'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.SpeedMax | round(3) }}
                                </td>
                                <td
                                    {% if idx.SpeedAvg == laps_report_info['TopAvgSpeeds'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.SpeedAvg == laps_report_info['TopAvgSpeeds'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.SpeedAvg | round(3) }}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row my-2">
            <h3
                data-en="{{ yaml_info['General']['Table']['SectorTimes']['Label']['en'] }}"
                data-jp="{{ yaml_info['General']['Table']['SectorTimes']['Label']['jp'] }}"
            >
                {{ yaml_info['General']['Table']['SectorTimes']['Label']['en'] }}
            </h3>
            <div class="col-md-auto">
                <span class="btn btn-secondary">
                    <span
                        data-en="{{ yaml_info['General']['Table']['TheoreticalBestLap']['Label']['en'] }}"
                        data-jp="{{ yaml_info['General']['Table']['TheoreticalBestLap']['Label']['jp'] }}"
                    >
                        {{ yaml_info['General']['Table']['TheoreticalBestLap']['Label']['en'] }}
                    </span>: {{ sectors_report_info['TheoreticalBestLap'] | laptimeformat }}
                </span>
                <span class="btn btn-secondary">
                    <span
                        data-en="{{ yaml_info['General']['Table']['SimulatedLapTime']['Label']['en'] }}"
                        data-jp="{{ yaml_info['General']['Table']['SimulatedLapTime']['Label']['jp'] }}"
                    >
                        {{ yaml_info['General']['Table']['SimulatedLapTime']['Label']['en'] }}
                    </span>: {{ sectors_report_info['SimulatedLapTime'] | laptimeformat }}
                </span>
            </div>
            <div class="col-md-12 my-2">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['LapNum']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['LapNum']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['LapNum']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Table']['LapTime']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Table']['LapTime']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Table']['LapTime']['Label']['en'] }}
                            </th>
                            {% for sector in range(sector_times_info[sector_times_info.keys() | list | first]['LapSectorTimes'] | length) %}
                                <th scope="col">
                                    <span
                                        data-en="{{ yaml_info['General']['Table']['Sector']['Label']['en'] }}"
                                        data-jp="{{ yaml_info['General']['Table']['Sector']['Label']['jp'] }}"
                                    >
                                        {{ yaml_info['General']['Table']['Sector']['Label']['en'] }}
                                    </span>
                                    {{ sector + 1 }}
                                </th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for idx in sector_times_info %}
                            <tr>
                                <th scope="row">{{ idx }}</th>
                                <td
                                    {% if idx == laps_report_info['TopLaps'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ sector_times_info[idx]['LapTime'] | laptimeformat }}
                                </td>
                                {% for time in range(sector_times_info[idx]['LapSectorTimes'] | length) %}
                                    {% set this_sector_time = sector_times_info[idx]['LapSectorTimes'][time] %}
                                    <td
                                        {% if this_sector_time == sectors_report_info['BestSectorTimes'][time] %}
                                            class="table-success fw-bold"
                                            style="border-color: revert; background-color: violet;"
                                        {% endif %}
                                    >
                                        {{ this_sector_time | laptimeformat }}
                                    </td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row my-2">
            <h3>Throttle / Brake / Coast Times</h3>
            <div class="col-md-12">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Lap No.</th>
                            <th scope="col">Throttle (&ge; 90%)</th>
                            <th scope="col">Throttle (1% &le; T &lt; 90%)</th>
                            <th scope="col">Brake (&ge; 90%)</th>
                            <th scope="col">Brake (1% &le; B &lt; 90%)</th>
                            <th scope="col">Coast (1% &lt; T &amp; 1% &lt; B)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for idx in range(throttle_brake_coast_times_info | length) %}
                            <tr>
                                <th scope="row">{{ idx }}</th>
                                <td>{{ throttle_brake_coast_times_info[idx]['ThrottleFull'] | laptimeformat }}</td>
                                <td>{{ throttle_brake_coast_times_info[idx]['ThrottlePartial'] | laptimeformat }}</td>
                                <td>{{ throttle_brake_coast_times_info[idx]['BrakeFull'] | laptimeformat }}</td>
                                <td>{{ throttle_brake_coast_times_info[idx]['BrakePartial'] | laptimeformat }}</td>
                                <td>{{ throttle_brake_coast_times_info[idx]['Coast'] | laptimeformat }}</td>
                            </tr>
                        {% endfor %}
                </table>
            </div>
        </div>
    </div>
</div>
