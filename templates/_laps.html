<div id="Lap" class="row my-2" style="display: none;">
    <div class="col-md-12">
        <div class="row my-2">
            <h3
                data-en="{{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}s"
                data-jp="{{ yaml_info['General']['Vocab']['Lap']['Label']['jp'] }}{{ yaml_info['General']['Vocab']['Time']['Label']['jp'] }}"
            >
                {{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}s
            </h3>
            <div class="col-md-12 my-2">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Vocab']['Lap']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Vocab']['Time']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Delta']['Label']['en'] }} ({{ yaml_info['General']['Vocab']['Secs']['Label']['en'] }})"
                                data-jp="{{ yaml_info['General']['Vocab']['Delta']['Label']['jp'] }} ({{ yaml_info['General']['Vocab']['Secs']['Label']['jp'] }})"
                            >
                                {{ yaml_info['General']['Vocab']['Delta']['Label']['en'] }} ({{ yaml_info['General']['Vocab']['Secs']['Label']['en'] }})
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Delta']['Label']['en'] }} (%)"
                                data-jp="{{ yaml_info['General']['Vocab']['Delta']['Label']['jp'] }} (%)"
                            >
                                {{ yaml_info['General']['Vocab']['Delta']['Label']['en'] }} (%)
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Distance']['Label']['en'] }} (km)"
                                data-jp="{{ yaml_info['General']['Vocab']['Distance']['Label']['jp'] }} (km)"
                            >
                                {{ yaml_info['General']['Vocab']['Distance']['Label']['en'] }} (km)
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Speed']['Label']['en'] }} (kph, {{ yaml_info['General']['Vocab']['Max']['Label']['en'] }})"
                                data-jp="{{ yaml_info['General']['Vocab']['Speed']['Label']['jp'] }} (kph, {{ yaml_info['General']['Vocab']['Max']['Label']['jp'] }})"
                            >
                                {{ yaml_info['General']['Vocab']['Speed']['Label']['en'] }} (kph, {{ yaml_info['General']['Vocab']['Max']['Label']['en'] }})
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Speed']['Label']['en'] }} (kph, {{ yaml_info['General']['Vocab']['Avg']['Label']['en'] }})"
                                data-jp="{{ yaml_info['General']['Vocab']['Speed']['Label']['jp'] }} (kph, {{ yaml_info['General']['Vocab']['Avg']['Label']['en'] }})"
                            >
                                {{ yaml_info['General']['Vocab']['Speed']['Label']['en'] }} (kph, {{ yaml_info['General']['Vocab']['Avg']['Label']['en'] }})
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for idx in laps_info %}
                            <tr>
                                <th scope="row">{{ idx.LapNum }}</th>
                                <td
                                    {% if idx.LapNum == laps_report_info['TopLaps'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.LapNum == laps_report_info['TopLaps'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.LapTime | laptimeformat }}
                                </td>
                                <td>{{ idx.DeltaToBestLap | round(3) }}</td>
                                <td>{{ idx.DeltaToBestLapPercent | round(2) }}</td>
                                <td
                                    {% if idx.LapDistance == laps_report_info['TopLapDistances'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.LapDistance == laps_report_info['TopLapDistances'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.LapDistance | to_km }}
                                </td>
                                <td
                                    {% if idx.SpeedMax == laps_report_info['TopMaxSpeeds'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.SpeedMax == laps_report_info['TopMaxSpeeds'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.SpeedMax | round(3) }}
                                </td>
                                <td
                                    {% if idx.SpeedAvg == laps_report_info['TopAvgSpeeds'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% elif idx.SpeedAvg == laps_report_info['TopAvgSpeeds'][1] %}
                                        class="table-warning fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ idx.SpeedAvg | round(3) }}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row my-2">
            <h3
                data-en="{{ yaml_info['General']['Vocab']['Sector']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}s"
                data-jp="{{ yaml_info['General']['Vocab']['Sector']['Label']['jp'] }}{{ yaml_info['General']['Vocab']['Time']['Label']['jp'] }}"
            >
                {{ yaml_info['General']['Vocab']['Sector']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}s
            </h3>
            <div class="col-md-12 d-flex flex-wrap gap-1">
                <span class="btn btn-secondary">
                    <span
                        data-en="{{ yaml_info['General']['Vocab']['TheoreticalBestLap']['Label']['en'] }}"
                        data-jp="{{ yaml_info['General']['Vocab']['TheoreticalBestLap']['Label']['jp'] }}"
                    >
                        {{ yaml_info['General']['Vocab']['TheoreticalBestLap']['Label']['en'] }}
                    </span>: {{ sectors_report_info['TheoreticalBestLap'] | laptimeformat }}
                </span>
                <span class="btn btn-secondary">
                    <span
                        data-en="{{ yaml_info['General']['Vocab']['SimulatedLapTime']['Label']['en'] }}"
                        data-jp="{{ yaml_info['General']['Vocab']['SimulatedLapTime']['Label']['jp'] }}"
                    >
                        {{ yaml_info['General']['Vocab']['SimulatedLapTime']['Label']['en'] }}
                    </span>: {{ sectors_report_info['SimulatedLapTime'] | laptimeformat }}
                </span>
            </div>
            <div class="col-md-12 my-2">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Vocab']['Lap']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}
                            </th>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Vocab']['Time']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}
                            </th>
                            {% for sector in range(sector_times_info[sector_times_info.keys() | list | first]['LapSectorTimes'] | length) %}
                                <th scope="col">
                                    <span
                                        data-en="{{ yaml_info['General']['Vocab']['Sector']['Label']['en'] }}"
                                        data-jp="{{ yaml_info['General']['Vocab']['Sector']['Label']['jp'] }}"
                                    >
                                        {{ yaml_info['General']['Vocab']['Sector']['Label']['en'] }}
                                    </span>
                                    {{ sector + 1 }}
                                </th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for idx in sector_times_info %}
                            <tr>
                                <th scope="row">{{ idx }}</th>
                                <td
                                    {% if idx == laps_report_info['TopLaps'][0] %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ sector_times_info[idx]['LapTime'] | laptimeformat }}
                                </td>
                                {% for time in range(sector_times_info[idx]['LapSectorTimes'] | length) %}
                                    {% set this_sector_time = sector_times_info[idx]['LapSectorTimes'][time] %}
                                    {% set best_sector_time = sectors_report_info['BestSectorTimes'][time] %}
                                    <td
                                        {% if this_sector_time == best_sector_time %}
                                            class="table-success fw-bold"
                                            style="border-color: revert; background-color: violet;"
                                        {% endif %}
                                    >
                                        {{ this_sector_time | laptimeformat }}
                                    </td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row my-2">
            <h3
                data-en="{{ yaml_info['General']['Vocab']['Throttle']['Label']['en'] }} / {{ yaml_info['General']['Vocab']['Brake']['Label']['en'] }} / {{ yaml_info['General']['Vocab']['Coast']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}s"
                data-jp="{{ yaml_info['General']['Vocab']['Throttle']['Label']['jp'] }} / {{ yaml_info['General']['Vocab']['Brake']['Label']['jp'] }} / {{ yaml_info['General']['Vocab']['Coast']['Label']['jp'] }} {{ yaml_info['General']['Vocab']['Time']['Label']['jp'] }}"
            >
                {{ yaml_info['General']['Vocab']['Throttle']['Label']['en'] }}
                /
                {{ yaml_info['General']['Vocab']['Brake']['Label']['en'] }}
                /
                {{ yaml_info['General']['Vocab']['Coast']['Label']['en'] }}
                {{ yaml_info['General']['Vocab']['Time']['Label']['en'] }}s
            </h3>
            <div class="col-md-12 my-2">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Vocab']['Lap']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}
                            </th>
                            <th scope="col">
                                <span
                                    data-en="{{ yaml_info['General']['Vocab']['Throttle']['Label']['en'] }}"
                                    data-jp="{{ yaml_info['General']['Vocab']['Throttle']['Label']['jp'] }}"
                                >
                                    {{ yaml_info['General']['Vocab']['Throttle']['Label']['en'] }}
                                </span>
                                (&ge; 90%)
                            </th>
                            <th scope="col">
                                <span
                                    data-en="{{ yaml_info['General']['Vocab']['Throttle']['Label']['en'] }}"
                                    data-jp="{{ yaml_info['General']['Vocab']['Throttle']['Label']['jp'] }}"
                                >
                                    {{ yaml_info['General']['Vocab']['Throttle']['Label']['en'] }}
                                </span>
                                (1% &le; T &lt; 90%)
                            </th>
                            <th scope="col">
                                <span
                                    data-en="{{ yaml_info['General']['Vocab']['Brake']['Label']['en'] }}"
                                    data-jp="{{ yaml_info['General']['Vocab']['Brake']['Label']['jp'] }}"
                                >
                                    {{ yaml_info['General']['Vocab']['Brake']['Label']['en'] }}
                                </span>
                                (&ge; 90%)
                            </th>
                            <th scope="col">
                                <span
                                    data-en="{{ yaml_info['General']['Vocab']['Brake']['Label']['en'] }}"
                                    data-jp="{{ yaml_info['General']['Vocab']['Brake']['Label']['jp'] }}"
                                >
                                    {{ yaml_info['General']['Vocab']['Brake']['Label']['en'] }}
                                </span>
                                (1% &le; B &lt; 90%)
                            </th>
                            <th scope="col">
                                <span
                                    data-en="{{ yaml_info['General']['Vocab']['Coast']['Label']['en'] }}"
                                    data-jp="{{ yaml_info['General']['Vocab']['Coast']['Label']['jp'] }}"
                                >
                                    {{ yaml_info['General']['Vocab']['Coast']['Label']['en'] }}
                                </span>
                                (1% &lt; T &amp; 1% &lt; B)
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for idx in range(throttle_brake_coast_report_info['Times'] | length) %}
                            {% set this_throttle_full = throttle_brake_coast_report_info['Times'][idx]['ThrottleFull'] %}
                            {% set this_throttle_partial = throttle_brake_coast_report_info['Times'][idx]['ThrottlePartial'] %}
                            {% set this_brake_full = throttle_brake_coast_report_info['Times'][idx]['BrakeFull'] %}
                            {% set this_brake_partial = throttle_brake_coast_report_info['Times'][idx]['BrakePartial'] %}
                            {% set this_coast = throttle_brake_coast_report_info['Times'][idx]['Coast'] %}

                            {% set best_throttle_full = throttle_brake_coast_report_info['BestTimes']['ThrottleFull'] %}
                            {% set best_throttle_partial = throttle_brake_coast_report_info['BestTimes']['ThrottlePartial'] %}
                            {% set best_brake_full = throttle_brake_coast_report_info['BestTimes']['BrakeFull'] %}
                            {% set best_brake_partial = throttle_brake_coast_report_info['BestTimes']['BrakePartial'] %}
                            {% set best_coast = throttle_brake_coast_report_info['BestTimes']['Coast'] %}

                            <tr>
                                <th scope="row">{{ idx }}</th>
                                <td
                                    {% if this_throttle_full == best_throttle_full %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ this_throttle_full | laptimeformat }}
                                </td>
                                <td
                                    {% if this_throttle_partial == best_throttle_partial %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ this_throttle_partial | laptimeformat }}
                                </td>
                                <td
                                    {% if this_brake_full == best_brake_full %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ this_brake_full | laptimeformat }}
                                </td>
                                <td
                                    {% if this_brake_partial == best_brake_partial %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ this_brake_partial | laptimeformat }}
                                </td>
                                <td
                                    {% if this_coast == best_coast %}
                                        class="table-success fw-bold"
                                        style="border-color: revert;"
                                    {% endif %}
                                >
                                    {{ this_coast | laptimeformat }}
                                </td>
                            </tr>
                        {% endfor %}
                </table>
            </div>
        </div>

        <div class="row my-2">
            <h3
                data-en="{{ yaml_info['General']['Vocab']['Fuel']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Usage']['Label']['en'] }}"
                data-jp="{{ yaml_info['General']['Vocab']['Fuel']['Label']['jp'] }}{{ yaml_info['General']['Vocab']['Usage']['Label']['jp'] }}"
            >
                {{ yaml_info['General']['Vocab']['Fuel']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Usage']['Label']['en'] }}
            </h3>
            <div class="col-md-12 d-flex flex-wrap gap-1">
                <span class="btn btn-secondary">
                    <span
                        data-en="{{ yaml_info['General']['Vocab']['Max']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Fuel']['Label']['en'] }}"
                        data-jp="{{ yaml_info['General']['Vocab']['Max']['Label']['jp'] }}{{ yaml_info['General']['Vocab']['Fuel']['Label']['jp'] }}"
                    >
                        {{ yaml_info['General']['Vocab']['Max']['Label']['en'] }} {{ yaml_info['General']['Vocab']['Fuel']['Label']['en'] }}
                    </span>: {{ static_info['DriverInfo']['DriverCarFuelMaxLtr'] }}
                    <span
                        data-en="{{ yaml_info['General']['Vocab']['Liter']['Label']['en'] }}s"
                        data-jp="{{ yaml_info['General']['Vocab']['Liter']['Label']['jp'] }}"
                    >
                        {{ yaml_info['General']['Vocab']['Liter']['Label']['en'] }}s
                    </span>
                </span>
            </div>
            <div class="col-md-12 my-2">
                <table class="table table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col"
                                data-en="{{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}"
                                data-jp="{{ yaml_info['General']['Vocab']['Lap']['Label']['jp'] }}"
                            >
                                {{ yaml_info['General']['Vocab']['Lap']['Label']['en'] }}
                            </th>
                            <th scope="col">Fuel (l)</th>
                            <th scope="col">Used (l)</th>
                            <th scope="col">Level (%)</th>
                            <th scope="col">Hourly (kg/h, Avg)</th>
                            <th scope="col">Hourly (l/h, Avg)</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for idx in range(fuel_usage_report_info['Usage'] | length) %}
                            {% set UsePerHourAvg_literhour = fuel_usage_report_info['Usage'][idx]['UsePerHourAvg'] / static_info['DriverInfo']['DriverCarFuelKgPerLtr'] %}
                            <tr>
                                <th scope="row">{{ idx }}</th>
                                <td>{{ fuel_usage_report_info['Usage'][idx]['Level'] | round(3) }}</td>
                                <td>{{ fuel_usage_report_info['Usage'][idx]['Used'] | round(3) }}</td>
                                <td>{{ fuel_usage_report_info['Usage'][idx]['LevelPct'] | round(3) }}</td>
                                <td>{{ fuel_usage_report_info['Usage'][idx]['UsePerHourAvg'] | round(3) }}</td>
                                <td>{{ UsePerHourAvg_literhour | round(3) }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
